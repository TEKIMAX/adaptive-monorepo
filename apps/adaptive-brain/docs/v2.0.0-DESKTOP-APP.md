# Version 2.0.0: Desktop Application

**Status:** Planning
**Target Release:** Q2-Q3 2026
**Type:** Native Desktop Distribution

---

## Vision

Package Adaptive Startup as a **native desktop application** that users can:

1. **Download & install** like any desktop app (Windows, Mac, Linux)
2. **Run offline** - no internet required after installation
3. **Double-click to start** - no Docker, no command line
4. **Auto-update** - seamless updates in the background
5. **Native feel** - OS integrations, file system access, notifications

---

## Technology Options

### Option 1: Electron (Recommended)

**What it is:** Package web apps as native desktop apps (used by VS Code, Slack, Discord)

**Pros:**
- ✅ Use existing React frontend as-is
- ✅ Bundle Node.js backend inside
- ✅ Cross-platform (Windows, Mac, Linux) from single codebase
- ✅ Mature ecosystem, great tooling
- ✅ Auto-update built-in
- ✅ Native OS integrations (notifications, file dialogs, etc.)

**Cons:**
- ❌ Large file size (150-300MB)
- ❌ Higher memory usage (~200MB base)
- ❌ "Web app in wrapper" feel

**Best For:** Fastest time to market, maximum compatibility

---

### Option 2: Tauri (Lighter Alternative)

**What it is:** Rust-based alternative to Electron

**Pros:**
- ✅ Much smaller file size (10-40MB)
- ✅ Lower memory usage (~50MB)
- ✅ Better performance
- ✅ Use existing React frontend
- ✅ More native feel

**Cons:**
- ❌ Newer, less mature ecosystem
- ❌ Need Rust knowledge for backend
- ❌ Migration from Node.js backend required
- ❌ Fewer libraries available

**Best For:** Performance-critical apps, once stable

---

### Option 3: NW.js (Alternative)

**What it is:** Similar to Electron, different architecture

**Pros:**
- ✅ Use existing React + Node.js
- ✅ Can run from source (no compilation)
- ✅ Smaller than Electron

**Cons:**
- ❌ Less popular, smaller community
- ❌ Fewer resources and tutorials
- ❌ Updates less frequent

**Best For:** Projects already using NW.js

---

## Recommended: Electron Architecture

### Application Structure

```
adaptive-startup-desktop/
├── main/                          # Electron main process
│   ├── index.ts                   # App entry point
│   ├── window.ts                  # Window management
│   ├── server.ts                  # Embedded Node.js server
│   ├── database.ts                # SQLite management
│   ├── updates.ts                 # Auto-update logic
│   └── ipc.ts                     # Inter-process communication
├── renderer/                      # Frontend (React app)
│   ├── src/
│   │   ├── (existing React app)
│   └── index.html
├── server/                        # Embedded backend
│   ├── api/
│   │   ├── auth.ts
│   │   ├── users.ts
│   │   ├── projects.ts
│   │   └── ai.ts
│   ├── db/
│   │   ├── schema.sql
│   │   └── client.ts
│   └── index.ts
├── resources/                     # App icons, assets
│   ├── icon.icns                  # Mac icon
│   ├── icon.ico                   # Windows icon
│   └── icon.png                   # Linux icon
├── build/                         # Build scripts
│   ├── notarize.js                # Mac code signing
│   └── installer.js               # Custom installer
├── electron-builder.yml           # Build configuration
├── package.json
└── README.md
```

---

## How It Works

### Architecture Diagram

```
┌─────────────────────────────────────────────────┐
│           Adaptive Startup Desktop              │
├─────────────────────────────────────────────────┤
│                                                 │
│  ┌──────────────────────────────────────────┐  │
│  │  Renderer Process (React Frontend)       │  │
│  │  - UI Components                         │  │
│  │  - State Management                      │  │
│  │  - API Client                            │  │
│  └─────────────┬────────────────────────────┘  │
│                │ IPC                            │
│                │                                │
│  ┌─────────────▼────────────────────────────┐  │
│  │  Main Process (Electron)                 │  │
│  │  - Window Management                     │  │
│  │  - OS Integration                        │  │
│  │  - Auto-Updates                          │  │
│  │  - File System Access                    │  │
│  └─────────────┬────────────────────────────┘  │
│                │                                │
│                │                                │
│  ┌─────────────▼────────────────────────────┐  │
│  │  Embedded Server (Node.js + Express)    │  │
│  │  - REST API                              │  │
│  │  - WebSocket Server                      │  │
│  │  - Business Logic                        │  │
│  └─────────────┬────────────────────────────┘  │
│                │                                │
│                │                                │
│  ┌─────────────▼────────────────────────────┐  │
│  │  SQLite Database                         │  │
│  │  - User Data                             │  │
│  │  - Projects                              │  │
│  │  - Settings                              │  │
│  └──────────────────────────────────────────┘  │
│                                                 │
└─────────────────────────────────────────────────┘
```

### Startup Flow

1. **User launches app** - Double-clicks icon
2. **Electron starts** - Main process initializes
3. **Server starts** - Node.js server starts on `localhost:3000`
4. **Database connects** - SQLite file opens (or creates if new)
5. **Window opens** - React app loads from `localhost:3000`
6. **User logs in** - Auth against local database
7. **App ready** - Full functionality available

---

## Key Technologies

### 1. Electron Core

```json
{
  "dependencies": {
    "electron": "^28.0.0",
    "electron-builder": "^24.0.0",
    "electron-updater": "^6.0.0"
  }
}
```

### 2. Backend Stack

```json
{
  "dependencies": {
    "express": "^4.18.0",
    "better-sqlite3": "^9.0.0",      // Fast SQLite for Node
    "socket.io": "^4.6.0",            // WebSockets
    "bcrypt": "^5.1.0",               // Password hashing
    "jsonwebtoken": "^9.0.0",         // JWT auth
    "node-fetch": "^3.3.0"            // API calls
  }
}
```

### 3. Frontend (Existing React)

```json
{
  "dependencies": {
    "react": "^18.2.0",
    "vite": "^5.0.0",
    "socket.io-client": "^4.6.0"
  }
}
```

---

## Feature Differences: Desktop vs Cloud

### Desktop-Specific Features

| Feature | Cloud | Desktop | Notes |
|---------|-------|---------|-------|
| **Installation** | Browser | Download & Install | ~200MB download |
| **Offline Mode** | ❌ | ✅ | Works without internet |
| **Data Storage** | Cloud DB | Local SQLite | User owns data |
| **Auto-Updates** | Always latest | Background updates | Can defer updates |
| **File System** | Limited | Full access | Save/export anywhere |
| **Notifications** | Browser | Native OS | Better integration |
| **Performance** | Network dependent | Local | Faster response |
| **Multi-Window** | Browser tabs | True windows | OS window management |
| **Tray Icon** | ❌ | ✅ | Run in background |
| **Keyboard Shortcuts** | Limited | Full | Global shortcuts |

### Limitations of Desktop Version

| Limitation | Workaround |
|------------|------------|
| **AI Features (Gemini API)** | Requires internet OR bundle local model (Ollama) |
| **Stripe Payments** | Requires internet |
| **Real-time Sync** | No multi-device sync unless self-hosted cloud |
| **Large File Size** | Accept or optimize with Tauri |
| **Platform-Specific Builds** | Build for each OS separately |

---

## Implementation Plan

### Phase 1: Electron Setup (2 weeks)

- [ ] Initialize Electron project
- [ ] Set up build pipeline
- [ ] Configure electron-builder
- [ ] Basic window management
- [ ] Load React app in Electron

**Files to Create:**
```
apps/adaptive-startup-desktop/
├── main/
│   └── index.ts
├── package.json
└── electron-builder.yml
```

---

### Phase 2: Backend Integration (3-4 weeks)

- [ ] Create Express server
- [ ] Set up SQLite database
- [ ] Port Convex functions to REST API
- [ ] Implement authentication
- [ ] WebSocket for real-time features
- [ ] Start server on app launch

**Files to Create:**
```
apps/adaptive-startup-desktop/
├── server/
│   ├── api/
│   │   ├── router.ts
│   │   ├── auth.ts
│   │   └── users.ts
│   ├── db/
│   │   ├── schema.sql
│   │   ├── migrations/
│   │   └── client.ts
│   └── index.ts
```

---

### Phase 3: Frontend Adaptation (2-3 weeks)

- [ ] Update API client for localhost
- [ ] Add Electron-specific features
- [ ] IPC for native dialogs
- [ ] File system operations
- [ ] Native notifications
- [ ] Keyboard shortcuts

**Files to Modify:**
```
apps/adaptive-startup-desktop/
└── renderer/
    └── src/
        ├── api/client.ts (update endpoints)
        ├── hooks/useElectron.ts (new)
        └── components/FileExport.tsx (new)
```

---

### Phase 4: Database & Storage (2 weeks)

- [ ] SQLite schema design
- [ ] Migration system
- [ ] Data import/export
- [ ] Backup/restore
- [ ] Settings persistence

**Database Location:**
- Mac: `~/Library/Application Support/AdaptiveStartup/data.db`
- Windows: `C:\Users\<user>\AppData\Roaming\AdaptiveStartup\data.db`
- Linux: `~/.config/AdaptiveStartup/data.db`

---

### Phase 5: Packaging & Distribution (2 weeks)

- [ ] Code signing (Mac & Windows)
- [ ] Build for all platforms
- [ ] Create installers (.dmg, .exe, .AppImage)
- [ ] Auto-update configuration
- [ ] Distribution channels

---

### Phase 6: Testing & QA (3-4 weeks)

- [ ] Cross-platform testing
- [ ] Install/uninstall testing
- [ ] Update mechanism testing
- [ ] Performance testing
- [ ] Security audit

**Total Timeline:** 3-4 months

---

## Building the App

### Development

```bash
# Install dependencies
npm install

# Start in development mode
npm run dev

# This starts:
# - Vite dev server (frontend)
# - Node.js server (backend)
# - Electron app (wraps both)
```

### Production Build

```bash
# Build for current platform
npm run build

# Build for all platforms
npm run build:all

# Output:
# dist/
# ├── Adaptive-Startup-1.0.0.dmg        # Mac installer
# ├── Adaptive-Startup-Setup-1.0.0.exe  # Windows installer
# └── Adaptive-Startup-1.0.0.AppImage   # Linux installer
```

### Configuration: electron-builder.yml

```yaml
appId: com.tekimax.adaptivestartup
productName: Adaptive Startup
copyright: Copyright © 2026 TEKIMAX LLC

directories:
  output: dist
  buildResources: resources

files:
  - main/**/*
  - renderer/dist/**/*
  - server/**/*
  - resources/**/*
  - package.json

mac:
  target:
    - dmg
    - zip
  category: public.app-category.business
  icon: resources/icon.icns
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist

win:
  target:
    - nsis
    - portable
  icon: resources/icon.ico
  publisherName: TEKIMAX LLC

linux:
  target:
    - AppImage
    - deb
    - rpm
  category: Office
  icon: resources/icon.png

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
```

---

## Auto-Update System

### How Auto-Updates Work

1. **App checks for updates** on startup (or periodically)
2. **Update server responds** with latest version info
3. **Download in background** if new version available
4. **Notify user** "Update ready to install"
5. **Restart app** to apply update

### Implementation

```typescript
// main/updates.ts
import { autoUpdater } from 'electron-updater';
import { app, dialog } from 'electron';

export function setupAutoUpdater() {
  // Check for updates on startup
  autoUpdater.checkForUpdatesAndNotify();

  // Check every 4 hours
  setInterval(() => {
    autoUpdater.checkForUpdatesAndNotify();
  }, 4 * 60 * 60 * 1000);

  autoUpdater.on('update-available', (info) => {
    dialog.showMessageBox({
      type: 'info',
      title: 'Update Available',
      message: `Version ${info.version} is available. It will be downloaded in the background.`,
    });
  });

  autoUpdater.on('update-downloaded', (info) => {
    dialog.showMessageBox({
      type: 'info',
      title: 'Update Ready',
      message: 'Update has been downloaded. Restart the app to install.',
      buttons: ['Restart', 'Later'],
    }).then((result) => {
      if (result.response === 0) {
        autoUpdater.quitAndInstall();
      }
    });
  });
}
```

### Update Distribution

**Options:**
1. **GitHub Releases** - Free, automatic
2. **Custom Server** - Full control
3. **Electron Release Server** - Self-hosted
4. **Hazel** - Minimal update server

---

## Distribution & Installation

### Mac (.dmg)

```
1. User downloads Adaptive-Startup-1.0.0.dmg
2. Opens DMG
3. Drags app to Applications folder
4. Launches from Applications
5. First launch: "This app is from the Internet. Are you sure?"
6. App opens and runs
```

**Code Signing Required:** Yes (Apple Developer account needed)

### Windows (.exe)

```
1. User downloads Adaptive-Startup-Setup-1.0.0.exe
2. Runs installer
3. Chooses install location
4. Installer extracts files
5. Creates shortcuts
6. Launches app
```

**Code Signing Recommended:** Yes (prevents Windows Defender warnings)

### Linux (.AppImage)

```
1. User downloads Adaptive-Startup-1.0.0.AppImage
2. Makes executable: chmod +x Adaptive-Startup-1.0.0.AppImage
3. Runs: ./Adaptive-Startup-1.0.0.AppImage
4. App launches
```

**Code Signing:** Not required

---

## File Sizes & Performance

### Expected Sizes

| Platform | Installer Size | Installed Size | Memory Usage |
|----------|----------------|----------------|--------------|
| **Mac (Intel)** | ~180MB | ~250MB | ~200MB RAM |
| **Mac (ARM)** | ~170MB | ~240MB | ~180MB RAM |
| **Windows** | ~150MB | ~220MB | ~210MB RAM |
| **Linux** | ~160MB | ~230MB | ~190MB RAM |

### Optimization Tips

- Tree-shake unused code
- Compress assets
- Use asar for packaging
- Lazy-load heavy features
- Consider Tauri for 80% size reduction

---

## Limitations & Solutions

### Limitation 1: AI Features Require Internet

**Problem:** Gemini API needs internet

**Solutions:**
1. **Bundle Ollama** - Run local LLM (adds ~4GB)
2. **Graceful Degradation** - Disable AI when offline
3. **Cache Responses** - Store common AI results
4. **Optional Cloud Mode** - Connect to cloud when online

---

### Limitation 2: No Multi-Device Sync

**Problem:** Data only on one computer

**Solutions:**
1. **Export/Import** - Manual data transfer
2. **Cloud Sync Option** - Connect to self-hosted instance
3. **Network Sync** - LAN sync between devices
4. **File-based Sync** - Use Dropbox/iCloud folder

---

### Limitation 3: Large Download Size

**Problem:** 150-200MB is large for initial download

**Solutions:**
1. **Progressive Download** - Download core first, rest later
2. **Web Installer** - Small downloader that fetches full app
3. **Switch to Tauri** - Reduce to 20-40MB
4. **Optimize Assets** - Compress images, fonts

---

### Limitation 4: Platform-Specific Bugs

**Problem:** Different behavior on Mac/Windows/Linux

**Solutions:**
1. **Extensive Testing** - Test on all platforms
2. **Platform Detection** - Conditional code paths
3. **Electron Debugging** - Remote debugging tools
4. **User Feedback** - Beta testing program

---

## Hybrid Approach: Desktop + Cloud

### Best of Both Worlds

```
User Choice:
├── Desktop Mode (Offline)
│   ├── Local SQLite database
│   ├── No cloud sync
│   └── Full privacy
│
└── Cloud Mode (Online)
    ├── Sync to cloud backend
    ├── Multi-device access
    └── Collaborative features
```

### Implementation

```typescript
// Settings
interface AppSettings {
  mode: 'offline' | 'cloud';
  cloudEndpoint?: string;
  syncEnabled: boolean;
}

// Switch modes
async function switchMode(mode: 'offline' | 'cloud') {
  if (mode === 'cloud') {
    // Enable cloud sync
    await connectToCloud();
    await syncLocalToCloud();
  } else {
    // Disconnect from cloud
    await downloadCloudData();
    await disconnectCloud();
  }
}
```

---

## Cost Analysis

### Development Costs

| Task | Time | Cost (at $150/hr) |
|------|------|-------------------|
| Electron Setup | 2 weeks | $12,000 |
| Backend Migration | 4 weeks | $24,000 |
| Frontend Adaptation | 3 weeks | $18,000 |
| Database & Storage | 2 weeks | $12,000 |
| Packaging & Distribution | 2 weeks | $12,000 |
| Testing & QA | 4 weeks | $24,000 |
| **Total** | **17 weeks** | **$102,000** |

### Ongoing Costs

- **Code Signing Certificates:** $500/year (Apple + Windows)
- **Update Server:** $50/month or free (GitHub)
- **Support:** Varies
- **Maintenance:** 20% of dev cost per year

---

## Comparison: Docker vs Desktop vs Cloud

| Feature | Cloud SaaS | Docker | Desktop App |
|---------|------------|--------|-------------|
| **Installation** | Browser | Command line | GUI installer |
| **Internet Required** | Yes | No (after setup) | No (after install) |
| **Size** | N/A | Varies | 150-200MB |
| **Updates** | Automatic | Manual pull | Auto-update |
| **User Control** | Low | High | Medium |
| **Data Privacy** | Medium | High | High |
| **Multi-Device** | Yes | No | Via sync |
| **OS Integration** | Limited | None | Full |
| **Deployment** | Instant | Minutes | Minutes |
| **Target User** | General | Technical | General |
| **Cost Model** | Monthly SaaS | License | License |

---

## Recommendation

### For v2.0.0: Offer All Three

1. **Cloud SaaS** (Current v1.0) - For users who want simple, managed
2. **Docker** - For enterprises needing self-hosted
3. **Desktop** - For individuals/SMBs wanting offline + simple

### Pricing

- **Cloud:** $29/month
- **Docker:** $99/month license
- **Desktop:** $199 one-time + $49/year updates

---

## Next Steps

1. **Validate Demand** - Survey users about desktop preference
2. **Choose Tech Stack** - Electron vs Tauri
3. **Build MVP** - Basic Electron wrapper
4. **Internal Testing** - Use within team
5. **Beta Program** - Select users
6. **Full Launch** - Public release

---

**Last Updated:** January 28, 2026
**Document Owner:** TEKIMAX Engineering Team
**Status:** Proposal - Requires Validation
