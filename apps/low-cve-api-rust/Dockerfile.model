# Source Stage: Get official binary
FROM ollama/ollama:latest as binary_source

# Runtime Stage: Official DHI (FIPS/SLA via Mirror)
FROM tekimaxllc/dhi-debian-base:bookworm

# Copy binary from official source
COPY --from=binary_source /bin/ollama /usr/bin/ollama

# (Optional: DHI Debian usually has libs; if missing, we can install or copy)
# For now, we trust the DHI base has glibc/libstdc++

ENV OLLAMA_HOST=0.0.0.0:11434
ENTRYPOINT ["/usr/bin/ollama"]
CMD ["serve"]
