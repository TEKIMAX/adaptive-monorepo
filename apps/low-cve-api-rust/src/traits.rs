use crate::types::{CreateResponseRequest, OpenResponseEvent, Model};
use async_trait::async_trait;
use std::error::Error;
use tokio::sync::mpsc::Sender;
use axum::http::HeaderMap;

#[async_trait]
pub trait Provider: Send + Sync {
    fn model_prefix(&self) -> &str;
    
    // Core execution function.
    async fn execute(
        &self, 
        request: &CreateResponseRequest, 
        headers: &HeaderMap,
        sender: Sender<OpenResponseEvent>
    ) -> Result<(), Box<dyn Error + Send + Sync>>;

    async fn list_models(&self) -> Result<Vec<Model>, Box<dyn Error + Send + Sync>>;
}
